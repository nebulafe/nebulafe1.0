<!Doctype html>
<html>
<head>
  <%- include ../meta.html %>
  <link href="/resource/css/jplayer.blue.monday.min.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="/resource/module/video-js/video-js.css"/>
  <link rel="stylesheet" href="/resource/css/course-video.css"/>
</head>
<body>
  <% var current_course = cur_resource[0]%>
  <%- include ../header.html %>
  <% var course = course[0]%>
  <div class="container loading" id="c-video-view">
    <video id="really-cool-video" class="video-js vjs-default-skin video-view" controls
           preload="auto" width="100%" height="600px" poster="<%-current_course.poster%>"
           data-setup='{}'>
      <source src="<%-current_course.webmv%>" type='video/webm'>
      <source src="<%-current_course.ogv%>" type='video/ogv'>
      <source src="<%-current_course.m4v%>" type='video/m4v'>

      <p class="vjs-no-js">
        To view this video please enable JavaScript, and consider upgrading to a web browser
        that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
      </p>
    </video>

    <!--播放列表-->
    <div class="c-video-list-wrapper" tabindex="0">
      <a class="c-recent-course-name">当前播放列表：<%=course.name%></a>
    </div>
    <div class="c-video-play-list" id="c-video-play-list">
      <%resources.forEach(function(val,idx){%>
      <a class="c-video-play-list-item <%if(val.id == current_course.id){%> current-play <%}%>"  href="/course/video/<%=course.id%>/<%=val.id%>">
          <span class="c-video-play-list-item-title "><%=val.title%></span>
        <span class="c-video-play-list-item-teacher">授课人：<%=val.artist%></span>
      </a>
      <%})%>
    </div>



    <!--
    <div id="jp_container_1" class="jp-video jp-video-360p" role="application" aria-label="media player">
      <div class="jp-type-playlist">
        <div id="jquery_jplayer_1" class="jp-jplayer"></div>
        <div class="jp-gui">
          <div class="jp-video-play">
            <button class="jp-video-play-icon" role="button" tabindex="0">play</button>
          </div>
          <div class="jp-interface">
            <div class="jp-progress">
              <div class="jp-seek-bar">
                <div class="jp-play-bar"></div>
              </div>
            </div>
            <div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>
            <div class="jp-duration" role="timer" aria-label="duration">&nbsp;</div>
            <div class="jp-controls-holder">
              <div class="jp-controls">
                <button class="jp-previous" role="button" tabindex="0">previous</button>
                <button class="jp-play" role="button" tabindex="0">play</button>
                <button class="jp-next" role="button" tabindex="0">next</button>
                <button class="jp-stop" role="button" tabindex="0">stop</button>
              </div>
              <div class="jp-volume-controls">
                <button class="jp-mute" role="button" tabindex="0">mute</button>
                <button class="jp-volume-max" role="button" tabindex="0">max volume</button>
                <div class="jp-volume-bar">
                  <div class="jp-volume-bar-value"></div>
                </div>
              </div>
              <div class="jp-toggles">
                <button class="jp-repeat" role="button" tabindex="0">repeat</button>
                <button class="jp-shuffle" role="button" tabindex="0">shuffle</button>
                <button class="jp-full-screen" role="button" tabindex="0">full screen</button>
              </div>
            </div>
            <div class="jp-details">
              <div class="jp-title" aria-label="title">&nbsp;</div>
            </div>
          </div>
        </div>
        <div class="jp-playlist">
          <ul>
            The method Playlist.displayPlaylist() uses this unordered list
            <li>&nbsp;</li>
          </ul>
        </div>
        <div class="jp-no-solution">
          <span>Update Required</span>
          To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
        </div>
      </div>
    </div>
    -->
  </div>

  <%- include ../footer.html %>

  <!--script>
  <% var r_len = resources.length%>
  var res = [
    <%resources.forEach(function(val,idx){%>
      {
        title:"<%=val.title%>",
        artist:"<%=val.artist%>",
        ogv: "<%-val.ogv%>",
        webmv: "<%-val.webmv%>",
        m4v : "<%-val.m4v%>",
        poster : "<%-val.poster%>"
      }<%if(idx != r_len - 1){%> , <%}%>
    <%})%>
  ]

  </script-->
  <script>
    (function(){
      //设置全屏
      var v = document.getElementById("really-cool-video");
      var h = document.documentElement.clientHeight - 60;
      v.setAttribute("height",h+"px");
      //加载脚本
      var s = document.createElement("script");
      s.src = "/resource/module/video-js/video.js";
      document.body.appendChild(s);
      s.addEventListener("load",function(){
        document.getElementById("c-video-view").classList.remove("loading");
      });
    })();
  </script>
  <script>seajs.use('js/course/video')</script>

</body>
</html>